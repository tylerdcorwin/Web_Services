<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<title></title>



  
<script type="text/javascript">


var url = 'http://www.geoplugin.net/json.gp?ip=64.17.241.5';
// Cross platform xmlhttprequest
//http://api.wunderground.com/api/a07fc64fa2c0560a/forecast/q/MA/Boston.json
// Create xmlhttprequest object
var xmlhttp = null;
if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
        //make sure that Browser supports overrideMimeType
        if ( typeof xmlhttp.overrideMimeType != 'undefined') { xmlhttp.overrideMimeType('text/xml'); }
} else if (window.ActiveXObject) {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}  else {
        alert('Perhaps your browser does not support xmlhttprequests?');
}

// Create an HTTP GET request
xmlhttp.open('GET', url, true);

// Set the callback function
xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
		//added in class
		var myObj = JSON.parse(xmlhttp.responseText);		
		myForm.ip.value = myObj.geoplugin_request;
		myForm.city.value = myObj.geoplugin_city;
		myForm.lat.value = myObj.geoplugin_latitude;
		myForm.lon.value = myObj.geoplugin_longitude;
	}
    else {
        // waiting for the call to complete
		//shows all processes not used in production!
		//alert(xmlhttp.readyState);
		
    }
};

// Make the actual request
xmlhttp.send(null);

</script>
</head>
<body>
	<form name="myForm">
		<h3>JSON web service</h3>
		<table>
			<tr>
				<td>IP Address:</td>
				<td><input type="text" name="ip"></td>		
			</tr>
			<tr>
				<td>City:</td>
				<td><input type="text" name="city"></td>		
			</tr>
			<tr>
				<td>Laitude:</td>
				<td><input type="text" name="lat"></td>		
			</tr>
			<tr>
				<td>Longitude</td>
				<td><input type="text" name="lon"></td>		
			</tr>
		</table>
	</form>
</BODY>
</html>
